# ğŸ¥‹ I Know Kung Fu
### â€” Claude Code Agent & Skill ì™„ì „ í•´ë¶€ â€”

> *"I know Kung Fu."*
> *"Show me."*
> â€” Neo & Morpheus, The Matrix (1999)

Skillì´ ë¡œë“œë˜ëŠ” ìˆœê°„, ClaudeëŠ” Neoì²˜ëŸ¼ ë§í•©ë‹ˆë‹¤.
ì´ ë ˆí¬ëŠ” **WiFi ë“œë¼ì´ë²„ ì½”ë“œ**ë¥¼ ìƒ˜í”Œë¡œ ì¨ì„œ
Claude Codeì˜ **Agent**, **Skill**, **Hook** ì´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€
ì²˜ìŒë¶€í„° ëê¹Œì§€ ëœ¯ì–´ë³´ëŠ” ë°ëª¨ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨

1. [ì™œ ì´ê±¸ ë§Œë“¤ì—ˆë‚˜](#ì™œ-ì´ê±¸-ë§Œë“¤ì—ˆë‚˜)
2. [LLM ê¸°ì´ˆ â€” ì´ê²ƒë§Œ ì•Œë©´ ëœë‹¤](#llm-ê¸°ì´ˆ--ì´ê²ƒë§Œ-ì•Œë©´-ëœë‹¤)
3. [Claude Code êµ¬ì„±ìš”ì†Œ ì „ì²´ ì§€ë„](#claude-code-êµ¬ì„±ìš”ì†Œ-ì „ì²´-ì§€ë„)
4. [CLAUDE.md â€” í”„ë¡œì íŠ¸ ê¸°ì–µ](#claudemd--í”„ë¡œì íŠ¸-ê¸°ì–µ)
5. [Skill â€” Neoì˜ ì¿µí‘¸ ë‹¤ìš´ë¡œë“œ](#skill--neoì˜-ì¿µí‘¸-ë‹¤ìš´ë¡œë“œ)
6. [Agent (Subagent) â€” ì „ë¬¸ íŒ€ì› í˜¸ì¶œ](#agent-subagent--ì „ë¬¸-íŒ€ì›-í˜¸ì¶œ)
7. [Hook â€” ì ˆëŒ€ ê·œì¹™](#hook--ì ˆëŒ€-ê·œì¹™)
8. [ë°ëª¨ í”„ë¡œì íŠ¸ êµ¬ì¡°](#ë°ëª¨-í”„ë¡œì íŠ¸-êµ¬ì¡°)
9. [ì˜ë„ì ìœ¼ë¡œ ì‹¬ì–´ë‘” ë¬¸ì œë“¤](#ì˜ë„ì ìœ¼ë¡œ-ì‹¬ì–´ë‘”-ë¬¸ì œë“¤)
10. [ë°œí‘œ ìˆœì„œ ê°€ì´ë“œ](#ë°œí‘œ-ìˆœì„œ-ê°€ì´ë“œ)

---

## ì™œ ì´ê±¸ ë§Œë“¤ì—ˆë‚˜

Claude Codeë¥¼ ì“°ë‹¤ ë³´ë©´ ì´ëŸ° ì˜ë¬¸ì´ ìƒê¹ë‹ˆë‹¤.

- Skillì´ ì–´ë–»ê²Œ ìë™ìœ¼ë¡œ ë¡œë“œë˜ëŠ” ê±°ì§€?
- Agent íŒŒì¼ì„ ë§Œë“¤ë©´ ë­ê°€ ë‹¬ë¼ì§€ëŠ” ê±°ì§€?
- Hookì€ ì–¸ì œ ì‹¤í–‰ë˜ëŠ” ê±°ì•¼?
- ì™œ ê°€ë” Claudeê°€ ì´ˆë°˜ ì§€ì‹œë¥¼ ìŠì–´ë²„ë¦¬ëŠ” ê±°ì§€?

ì´ ë ˆí¬ëŠ” ê·¸ ì§ˆë¬¸ë“¤ì— **"ì§ì ‘ ë³´ì—¬ì£¼ëŠ”"** ë°©ì‹ìœ¼ë¡œ ë‹µí•©ë‹ˆë‹¤.
ìƒ˜í”Œì€ ìš°ë¦¬ íŒ€ì´ ë§¤ì¼ ë‹¤ë£¨ëŠ” WiFi ë“œë¼ì´ë²„ ì½”ë“œë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

---

## LLM ê¸°ì´ˆ â€” ì´ê²ƒë§Œ ì•Œë©´ ëœë‹¤

Claude Codeë¥¼ ì œëŒ€ë¡œ ì“°ë ¤ë©´ LLMì´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.
"ì™œ ì´ë ‡ê²Œ ë™ì‘í•˜ì§€?"ê°€ "ì´ë ‡ê²Œ ì“°ë©´ ë” ì˜ ëœë‹¤"ë¡œ ë°”ë€ë‹ˆë‹¤.

### Token â€” LLMì´ ë³´ëŠ” ìµœì†Œ ë‹¨ìœ„

LLMì€ ë¬¸ìê°€ ì•„ë‹ˆë¼ **token** ë‹¨ìœ„ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```
"wifi_core"  â†’ ["wifi", "_", "core"]        (3 tokens)
"GFP_KERNEL" â†’ ["G", "FP", "_K", "ERNET"]  (4 tokens)
"the"        â†’ ["the"]                      (1 token)

ëŒ€ëµ:  ì˜ì–´ 1ë‹¨ì–´  â‰ˆ 1.3 tokens
       í•œêµ­ì–´ 1ê¸€ì â‰ˆ 1.5~3 tokens
       ì½”ë“œ 1ì¤„    â‰ˆ 5~15 tokens
```

**í† í°ì´ë€ ì •í™•íˆ ë¬´ì—‡ì¸ê°€?**

í† í°ì€ "ì˜ë¯¸ ë‹¨ìœ„"ê°€ ì•„ë‹ˆë¼ **"ìì£¼ ë“±ì¥í•˜ëŠ” ë¬¸ì ì¡°í•©"** ê¸°ì¤€ìœ¼ë¡œ ìª¼ê°­ë‹ˆë‹¤ (BPE, Byte Pair Encoding).

```
í•™ìŠµ ë°ì´í„°ì— "the"ê°€ ìˆ˜ì‹­ì–µ ë²ˆ ë“±ì¥
â†’ "t", "h", "e" ë¥¼ í•©ì³ì„œ "the" = í† í° 1ê°œ

"GFP_KERNEL"ì€ ë“œë¬¼ê²Œ ë“±ì¥
â†’ ìì£¼ ë³´ì´ëŠ” ì¡°ê°ë“¤ë¡œ ë¶„í•´: "G" + "FP" + "_K" + "ERNEL"
```

ì¦‰, **í”í•œ ì¡°í•© = í•˜ë‚˜ì˜ í† í°**, **í¬ê·€í•œ ì¡°í•© = ì—¬ëŸ¬ í† í°ìœ¼ë¡œ ë¶„í•´**

> **ì§ê´€ì  ë¹„ìœ :** í† í° = **ì••ì¶•ì˜ ë‹¨ìœ„**
> ZIP íŒŒì¼ì²˜ëŸ¼, ìì£¼ ë‚˜ì˜¤ëŠ” íŒ¨í„´ì€ ì§§ì€ ì½”ë“œ í•˜ë‚˜ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.
> "the"ëŠ” ë„ˆë¬´ í”í•´ì„œ ì½”ë“œ 1ê°œ, "GFP_KERNEL"ì€ ë“œë¬¼ì–´ì„œ 4ê°œ í•„ìš”.

**í•œêµ­ì–´ê°€ ë” ë§ì€ í† í°ì„ ì“°ëŠ” ì´ìœ :**

GPT ê³„ì—´ í† í¬ë‚˜ì´ì €ëŠ” ì˜ì–´ ì¤‘ì‹¬ ë°ì´í„°ë¡œ í•™ìŠµë©ë‹ˆë‹¤.

```
"cat"  â†’ í•™ìŠµ ë°ì´í„°ì— ì—„ì²­ ë§ìŒ â†’ í† í° 1ê°œ
"ê³ ì–‘ì´" â†’ ìƒëŒ€ì ìœ¼ë¡œ ì ìŒ â†’ "ê³ ", "ì–‘", "ì´" = í† í° 3ê°œ
```

í•œêµ­ì–´ëŠ” ê¸€ì ë‹¨ìœ„ë¡œ ìª¼ê°œì§€ëŠ” ê²½ìš°ê°€ ë§ì•„ì„œ í† í° ìˆ˜ê°€ ë§ì•„ì§‘ë‹ˆë‹¤.

| ì˜¤í•´ | ì‹¤ì œ |
|------|------|
| í† í° = ë‹¨ì–´ | í† í° = ë¹ˆë„ ê¸°ë°˜ ë¬¸ì ì¡°ê° |
| ì˜ë¯¸ ìˆëŠ” ë‹¨ìœ„ | í†µê³„ì ìœ¼ë¡œ ìì£¼ ë¶™ì–´ ë‚˜ì˜¤ëŠ” ë‹¨ìœ„ |
| ì–¸ì–´ ë¬´ê´€ | í•™ìŠµ ë°ì´í„° ì–¸ì–´ì— í¸í–¥ë¨ |

**ì‹¤ë¬´ ì ìš©:** í† í°ì´ ì–¸ì–´ì™€ ë„ë©”ì¸ì— ë”°ë¼ ì´ë ‡ê²Œ ì°¨ì´ê°€ ë‚˜ê¸° ë•Œë¬¸ì—,
ì½”ë“œëŠ” íŠ¹íˆ í† í°ì„ ë§ì´ ì†Œëª¨í•©ë‹ˆë‹¤. ë‘ ê°€ì§€ ì´ìœ ê°€ ìˆìŠµë‹ˆë‹¤.

ì²«ì§¸, ë„ë©”ì¸ íŠ¹í™” ì‹ë³„ìì™€ ë„¤ì´ë° ì»¨ë²¤ì…˜ì€ í•™ìŠµ ë°ì´í„°ì— ë“œë¬¼ì–´ì„œ ë” ì˜ê²Œ ìª¼ê°œì§‘ë‹ˆë‹¤.

```
"GFP_KERNEL"          â†’ "G" + "FP" + "_K" + "ERNEL"   (4 tokens)
"wifi_core_scan_start" â†’ ì—¬ëŸ¬ ì¡°ê°ìœ¼ë¡œ ë¶„í•´              (ë§ì€ tokens)
```

ë‘˜ì§¸, `->`, `*`, `{`, `}`, `;` ê°™ì€ êµ¬ë¬¸ ê¸°í˜¸ë“¤ë„ ê°ê° í† í°ì„ ì†Œëª¨í•©ë‹ˆë‹¤.

```c
skb->data + offset
â†’ "skb", "->", "data", " ", "+", " ", "offset"   (7 tokens)
```

ë”°ë¼ì„œ íŒŒì¼ ì „ì²´ë³´ë‹¤ ê´€ë ¨ í•¨ìˆ˜ë§Œ ì£¼ë©´ ë” ë¹ ë¥´ê³  ì •í™•í•©ë‹ˆë‹¤.

---

### Context Window â€” LLMì˜ ì‘ì—… ê¸°ì–µ

LLMì´ í•œ ë²ˆì— ë³¼ ìˆ˜ ìˆëŠ” **ìµœëŒ€ token ìˆ˜**ì…ë‹ˆë‹¤.
ì´ ë²”ìœ„ ì•ˆì˜ ë‚´ìš©ë§Œ "ê¸°ì–µ"í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Context Window                     â”‚
â”‚                                                      â”‚
â”‚  [System Prompt]   [ëŒ€í™” íˆìŠ¤í† ë¦¬]   [í˜„ì¬ ì§ˆë¬¸]      â”‚
â”‚        â†‘                â†‘                â†‘           â”‚
â”‚   CLAUDE.md,        ì£¼ê³ ë°›ì€         ì§€ê¸ˆ ì…ë ¥í•œ      â”‚
â”‚   Skill ë‚´ìš©        ëª¨ë“  ë‚´ìš©         í”„ë¡¬í”„íŠ¸         â”‚
â”‚                                                      â”‚
â”‚   â† ì´ ì°½ì„ ë²—ì–´ë‚œ ë‚´ìš©ì€ Claudeê°€ ëª¨ë¦„ â†’            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì‹¤ë¬´ ì ìš©:** ëŒ€í™”ê°€ ê¸¸ì–´ì§ˆìˆ˜ë¡ Claudeê°€ ì´ˆë°˜ ì§€ì‹œë¥¼ "ìŠì–´ë²„ë¦¬ëŠ”"
í˜„ìƒì€ ë²„ê·¸ê°€ ì•„ë‹™ë‹ˆë‹¤. Contextê°€ ê½‰ ì°¨ë©´ ì•ë¶€ë¶„ì´ ë°€ë ¤ë‚©ë‹ˆë‹¤.
CLAUDE.mdì— í•µì‹¬ì„ ì ì–´ë‘ê³  `/compact`ë¥¼ ì“°ëŠ” ì´ìœ ê°€ ì—¬ê¸°ì— ìˆìŠµë‹ˆë‹¤.

---

### Temperature â€” ë¬´ì‘ìœ„ì„± ì¡°ì ˆ ë‹¤ì´ì–¼

ì¶œë ¥ì˜ **ì°½ì˜ì„±(ë¬´ì‘ìœ„ì„±)** ì„ ì¡°ì ˆí•˜ëŠ” ê°’ì…ë‹ˆë‹¤.

**ë™ì‘ ì›ë¦¬: logits â†’ temperature ë‚˜ëˆ„ê¸° â†’ softmax â†’ ìƒ˜í”Œë§**

ëª¨ë¸ì€ ë‹¤ìŒ í† í° í›„ë³´ë§ˆë‹¤ ì ìˆ˜(logit)ë¥¼ ë§¤ê¸°ê³ , temperatureë¡œ ë‚˜ëˆˆ ë’¤
softmaxë¡œ í™•ë¥ ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. randomnessëŠ” ì´ í™•ë¥  ë¶„í¬ì—ì„œ **ìƒ˜í”Œë§**í•  ë•Œ ë°œìƒí•©ë‹ˆë‹¤.

softmax ê³µì‹: `P(í† í°_i) = exp(logit_i / T) / Î£ exp(logit_j / T)`

```
ì˜ˆì‹œ â€” T=1.0, logits: kmalloc=5.0, kzalloc=4.0, malloc=3.0, GFP=2.0

exp(5.0) = 148.41
exp(4.0) =  54.60
exp(3.0) =  20.09
exp(2.0) =   7.39
           â”€â”€â”€â”€â”€â”€
í•©ê³„      = 230.49

kmalloc: 148.41 / 230.49 = 64.4%
kzalloc:  54.60 / 230.49 = 23.7%
malloc:   20.09 / 230.49 =  8.7%
GFP:       7.39 / 230.49 =  3.2%
```

Të¥¼ ì¡°ì ˆí•˜ë©´ logitì„ ë‚˜ëˆ„ê¸° ì „ì— ìŠ¤ì¼€ì¼ì´ ë°”ë€Œì–´, ë¶„í¬ê°€ sharpí•´ì§€ê±°ë‚˜ flatí•´ì§‘ë‹ˆë‹¤.

```
"kmallocëŠ”" ì´í›„ ë‹¤ìŒ í† í° ì˜ˆì¸¡:

logits:  kmalloc=5.0  kzalloc=4.0  malloc=3.0  GFP=2.0

T=0.5 (ë‚®ìŒ):  logits / 0.5  â†’ ì°¨ì´ ë²Œì–´ì§ â†’ í™•ë¥  ì ë¦¼
  kmalloc  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  87%
  kzalloc  â–ˆâ–ˆâ–ˆâ–ˆ  12%
  malloc   â–  1%

T=1.0 (ê¸°ë³¸):  logits ê·¸ëŒ€ë¡œ
  kmalloc  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  54%
  kzalloc  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  37%
  malloc   â–ˆâ–ˆâ–ˆ  7%

T=2.0 (ë†’ìŒ):  logits / 2.0  â†’ ì°¨ì´ ì¤„ì–´ë“¦ â†’ ê³ ë¥´ê²Œ í´ì§
  kmalloc  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  39%
  kzalloc  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  32%
  malloc   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  20%
  GFP      â–ˆâ–ˆâ–ˆâ–ˆ  12%
```

â†’ ê°€ì¤‘ ë£°ë ›ì²˜ëŸ¼ ì´ í™•ë¥ ëŒ€ë¡œ ìƒ˜í”Œë§. ì™„ì „í•œ randomì´ ì•„ë‹ˆë¼
**í•™ìŠµ ë°ì´í„° íŒ¨í„´ì— ê¸°ë°˜í•œ ê°€ì¤‘ random**ì…ë‹ˆë‹¤.

**T=0ì´ë©´ í•­ìƒ ê°™ì€ ë‹µì¸ê°€?**

ì´ë¡ ì ìœ¼ë¡œëŠ” yes (í•­ìƒ ìµœê³  í™•ë¥  í† í° ì„ íƒ). í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” "ê±°ì˜" yes.
GPU ë³‘ë ¬ ì—°ì‚°ì˜ ë¶€ë™ì†Œìˆ˜ì  ì²˜ë¦¬ ìˆœì„œê°€ ë¯¸ì„¸í•˜ê²Œ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ì„œ,
í™•ë¥ ì´ ì•„ì£¼ ë¹„ìŠ·í•œ í† í° ê°„ì— ê°„í—ì ìœ¼ë¡œ ê²°ê³¼ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
T=0: ê±°ì˜ í•­ìƒ ë™ì¼  (ì½”ë“œ ìƒì„±, ì‚¬ì‹¤ ë‹µë³€ì— ì í•©)
T=1: ë§¤ë²ˆ ì¡°ê¸ˆ ë‹¤ë¦„  (ì¼ë°˜ ëŒ€í™”)
T=2: ë§¤ë²ˆ í¬ê²Œ ë‹¤ë¦„  (ì°½ì‘, ë¸Œë ˆì¸ìŠ¤í† ë°)
```

**ì‹¤ë¬´ ì ìš©:** ê°™ì€ í”„ë¡¬í”„íŠ¸ë¥¼ ì¤˜ë„ ë§¤ë²ˆ ê²°ê³¼ê°€ ì¡°ê¸ˆì”© ë‹¬ë¼ì§€ëŠ” ì´ìœ ì…ë‹ˆë‹¤.
LLMì€ ê·¼ë³¸ì ìœ¼ë¡œ **í™•ë¥ ì (probabilistic)** ì…ë‹ˆë‹¤.

---

### Hallucination â€” ì™œ í‹€ë¦° ë§ì„ í™•ì‹ í•˜ë©° í•˜ë‚˜

LLMì€ **"ë‹¤ìŒì— ì˜¬ ê°€ëŠ¥ì„±ì´ ë†’ì€ token"** ì„ ì˜ˆì¸¡í•˜ëŠ” ëª¨ë¸ì…ë‹ˆë‹¤.
ì •ë‹µì„ "ì•Œê³ " ë§í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼, í•™ìŠµ ë°ì´í„° íŒ¨í„´ ê¸°ë°˜ìœ¼ë¡œ
ê·¸ëŸ´ë“¯í•œ ê²ƒì„ ìƒì„±í•©ë‹ˆë‹¤.

```
í•™ìŠµ ë°ì´í„° íŒ¨í„´:
  "RCUë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ___ ì„ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤"
  â†’ "synchronize_rcu()" ë†’ì€ í™•ë¥ ë¡œ ì˜ˆì¸¡  âœ…

  "NetAdapterCx ìµœì‹  ë²„ì „ì€ ___"
  â†’ í•™ìŠµ ë°ì´í„°ì— ì—†ìœ¼ë©´ ê·¸ëŸ´ë“¯í•œ ë²„ì „ ë²ˆí˜¸ë¥¼ ì§€ì–´ëƒ„  âŒ
```

**ì‹¤ë¬´ ì ìš©:**
- API ë²„ì „, ìµœì‹  ìŠ¤í™, ì‚¬ë‚´ ì½”ë“œë² ì´ìŠ¤ â†’ ì§ì ‘ íŒŒì¼ì„ ì£¼ê±°ë‚˜ ê²€ìƒ‰ì‹œì¼œì•¼ í•¨
- Claude Codeì˜ `Read` toolì´ ì¤‘ìš”í•œ ì´ìœ : ì‹¤ì œ íŒŒì¼ì„ ì½ì–´ì„œ **Grounding**
- ì½”ë“œ ë¦¬ë·° ê²°ê³¼ëŠ” ë°˜ë“œì‹œ ì‹¤ì œ íŒŒì¼ì„ ì—´ì–´ë³´ê²Œ í•´ì•¼ ì •í™•

**Groundingì´ ë™ì‘í•˜ëŠ” ì›ë¦¬:**

Groundingì€ ëª¨ë¸ì˜ ê°€ì¤‘ì¹˜(weights)ë¥¼ ë°”ê¾¸ì§€ ì•ŠìŠµë‹ˆë‹¤.
ì‹¤ì œ íŒŒì¼ ë‚´ìš©ì„ ì»¨í…ìŠ¤íŠ¸ í† í°ìœ¼ë¡œ ì£¼ì…í•˜ë©´, ì•ì„œ ë‚˜ì˜¨ í† í°ë“¤ì´
ë‹¤ìŒ í† í°ì˜ ì¡°ê±´ë¶€ í™•ë¥  ë¶„í¬ë¥¼ ë°”ê¿‰ë‹ˆë‹¤.

```
P(ë‹¤ìŒ í† í°) = softmax( model(ì•ì„œ ë‚˜ì˜¨ ëª¨ë“  í† í°ë“¤) )
```

ì‹¤ì œ ì½”ë“œê°€ ì•ì— ë†“ì´ë©´, ê·¸ í† í°ë“¤ê³¼ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ë°©í–¥(hallucination)ì€
í™•ë¥ ì´ ë‚®ì•„ì§€ê³  ìì—°ìŠ¤ëŸ½ê²Œ ê°€ì§€ê°€ ì³ì§‘ë‹ˆë‹¤.
ì´ê²ƒì´ Attention ë©”ì»¤ë‹ˆì¦˜ì´ í•˜ëŠ” ì¼ì…ë‹ˆë‹¤. â†’

---

### Attention ë©”ì»¤ë‹ˆì¦˜ â€” ì–´ë””ë¥¼ ì§‘ì¤‘í•´ì„œ ë³´ë‚˜

Attentionì€ **"ì§€ê¸ˆ ì´ ìˆœê°„, ì•ì„œ ë‚˜ì˜¨ í† í°ë“¤ ì¤‘ ì–´ë””ì— ì§‘ì¤‘í• ê¹Œ"** ë¥¼ ê²°ì •í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤.
ì‹œí—˜ ë³¼ ë•Œ ë¬¸ì œì§€ ì „ì²´ë¥¼ ë‹¤ì‹œ ì½ì§€ ì•Šê³  ê´€ë ¨ ìˆëŠ” ë¶€ë¶„ì—ë§Œ ëˆˆì´ ê°€ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.

**Attentionì€ í™•ë¥  ë¶„í¬ë¥¼ ì§ì ‘ ë§Œë“¤ì§€ ì•ŠìŠµë‹ˆë‹¤**

```
"RCUë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ___"
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Transformer Layer (Ã— ìˆ˜ì‹­ ë²ˆ ë°˜ë³µ)  â”‚
â”‚                                     â”‚
â”‚  1. Attention                       â”‚
â”‚     ì• í† í° ì¤‘ ì§€ê¸ˆì— ê´€ë ¨ëœ ê²ƒ ì„ íƒ  â”‚
â”‚     "RCUë¥¼", "ì‚¬ìš©í•  ë•ŒëŠ”" ì— ì§‘ì¤‘   â”‚
â”‚     â†’ ë¬¸ë§¥ì„ ë°˜ì˜í•œ í‘œí˜„ ì—…ë°ì´íŠ¸    â”‚
â”‚                                     â”‚
â”‚  2. FFN (í•™ìŠµëœ ì§€ì‹ ì°½ê³ )           â”‚
â”‚     "ì´ íŒ¨í„´ ë‹¤ìŒì—” ë³´í†µ ì´ê²Œ ì˜¤ë”ë¼" â”‚
â”‚     â†’ í•™ìŠµ ì§€ì‹ í™œì„±í™”               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   í™•ë¥  ë¶„í¬ ê³„ì‚° (LM Head + Softmax)
   "synchronize_rcu()"  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  75%
   "rcu_read_lock()"    â–ˆâ–ˆâ–ˆâ–ˆ      20%
   "kfree()"            â–          5%
         â”‚
         â–¼
      ìƒ˜í”Œë§ â†’ ë‹¤ìŒ í† í° ì„ íƒ
```

Attentionì€ "ì–´ë””ë¥¼ ë³¼ê¹Œ"ë¥¼ ê²°ì •í•˜ê³ , FFNì€ "ê±°ê¸°ì„œ ë­˜ êº¼ë‚¼ê¹Œ"ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.
ì´ ë‘˜ì´ ìˆ˜ì‹­ ë²ˆ ë°˜ë³µë˜ê³  ë‚˜ì„œì•¼ í™•ë¥  ë¶„í¬ê°€ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.

**Attention ë‚´ë¶€ ë™ì‘: "free the skb" ì˜ˆì‹œ**

```
Step 1: ê° í† í° ê°„ ìœ ì‚¬ë„ ì ìˆ˜ ê³„ì‚°
  score(freeâ†’free) = 0.84
  score(freeâ†’the)  = 0.36
  score(freeâ†’skb)  = 0.78

Step 2: Softmax â†’ ì§‘ì¤‘ ê°€ì¤‘ì¹˜
  free â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 0.39
  the  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ         0.24
  skb  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   0.37

  â†’ "free"ê°€ "skb"ì— ê°•í•˜ê²Œ ì§‘ì¤‘
  â†’ "free the skb"ì—ì„œ ì˜ë¯¸ì  ì—°ê²° ìë™ í¬ì°©

Step 3: ê°€ì¤‘ì¹˜ë¡œ ì •ë³´ í•©ì‚° â†’ ë¬¸ë§¥ì„ ë°˜ì˜í•œ ìƒˆë¡œìš´ í‘œí˜„ ìƒì„±
```

"freeì™€ skbê°€ ê´€ë ¨ ìˆë‹¤"ëŠ” ê±¸ ì‚¬ëŒì´ ê°€ë¥´ì¹œ ê²Œ ì•„ë‹™ë‹ˆë‹¤.
ìˆ˜ë§ì€ ì»¤ë„ ì½”ë“œë¥¼ í•™ìŠµí•˜ë©´ì„œ **ìŠ¤ìŠ¤ë¡œ í¬ì°©**í•œ ê´€ê³„ì…ë‹ˆë‹¤.

**Multi-Head Attention â€” ì—¬ëŸ¬ ê´€ì ì—ì„œ ë™ì‹œì—**

```
Head 1: ë¬¸ë²•ì  ê´€ê³„  â†’ "free" â†’ "skb" (ë™ì‚¬-ëª©ì ì–´)
Head 2: ì˜ë¯¸ì  ê´€ê³„  â†’ "free" â†’ "memory" (í•´ì œì™€ ë©”ëª¨ë¦¬)
Head 3: ìœ„ì¹˜ ê´€ê³„    â†’ ì¸ì ‘í•œ ë‹¨ì–´ë“¤ì˜ ê´€ê³„
...ê° Head ì¶œë ¥ì„ concat â†’ ìµœì¢… í‘œí˜„
```

**ì™œ ì•ë¶€ë¶„ í”„ë¡¬í”„íŠ¸ê°€ ì¤‘ìš”í•œê°€ â€” Causal Masking**

Claude ê°™ì€ Decoder-only ëª¨ë¸ì€ í† í°ì„ **ì™¼ìª½â†’ì˜¤ë¥¸ìª½ìœ¼ë¡œ ìˆœì„œëŒ€ë¡œ** ìƒì„±í•©ë‹ˆë‹¤.
ë¯¸ë˜ í† í°ì€ ë³¼ ìˆ˜ ì—†ë„ë¡ **Causal Masking** ì´ ì ìš©ë©ë‹ˆë‹¤.

```
Attention ê°€ëŠ¥ ë²”ìœ„ (O = ë³¼ ìˆ˜ ìˆìŒ, X = ëª» ë´„)

              [1]ë‹¹ì‹ ì€  [2]WiFi  [3]ì „ë¬¸ê°€  [4]ì…ë‹ˆë‹¤  [5]ë¶„ì„í•´ì¤˜
[1] ë‹¹ì‹ ì€       O          X         X          X          X
[2] WiFi         O          O         X          X          X
[3] ì „ë¬¸ê°€       O          O         O          X          X
[4] ì…ë‹ˆë‹¤       O          O         O          O          X
[5] ë¶„ì„í•´ì¤˜     O          O         O          O          O
```

ì•ìª½ í† í°ì€ ëª¨ë“  í›„ì† í† í°ì—ì„œ ì°¸ì¡°ë©ë‹ˆë‹¤.
ì´ê²ƒì´ "ì•ë¶€ë¶„ í”„ë¡¬í”„íŠ¸ê°€ ì¤‘ìš”í•œ" ì§„ì§œ ì´ìœ ì…ë‹ˆë‹¤.
**ë‹¨ë°©í–¥ ìƒì„± êµ¬ì¡°(Causal Masking)ì˜ ê²°ê³¼**ì…ë‹ˆë‹¤.

**Attention ê³„ì‚°ëŸ‰ê³¼ Context Window**

```
Attention ê³„ì‚°ëŸ‰ = O(nÂ²)  (n = token ìˆ˜)

token 1,000ê°œ   â†’       1,000,000ë²ˆ ê³„ì‚°
token 10,000ê°œ  â†’ 100,000,000ë²ˆ ê³„ì‚°
```

ê¸´ contextì—ì„œ ì¤‘ìš”í•œ ì •ë³´ê°€ "í¬ì„"ë˜ëŠ” ìˆ˜í•™ì  ì´ìœ ì…ë‹ˆë‹¤.
Skill ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œ(300ì¤„) ì „ì²´ë¥¼ contextì— ë„£ì§€ ì•Šê³ 
**ì‹¤í–‰ ê²°ê³¼(stdout) 50ì¤„ë§Œ** ë„£ëŠ” ì„¤ê³„ê°€ ì˜³ì€ ì´ìœ ì´ê¸°ë„ í•©ë‹ˆë‹¤.

---

### ì‹¤ë¬´ ê°ê° ìš”ì•½í‘œ

| LLM ê°œë… | Claude Codeì—ì„œì˜ ì˜ë¯¸ |
|----------|----------------------|
| Token | íŒŒì¼ ì „ì²´ë³´ë‹¤ ê´€ë ¨ í•¨ìˆ˜ë§Œ ì£¼ë©´ ë¹ ë¥´ê³  ì •í™• |
| Context Window | CLAUDE.mdÂ·Skillë¡œ í•µì‹¬ ì •ë³´ ìœ ì§€ / `/compact`ë¡œ ê´€ë¦¬ |
| Temperature | LLMì€ í™•ë¥ ì  â†’ Hookìœ¼ë¡œ ê²°ì •ë¡ ì  ë™ì‘ ë³´ì¥ |
| Attention + Causal Masking | ì• í”„ë¡¬í”„íŠ¸ê°€ ì¤‘ìš”í•œ êµ¬ì¡°ì  ì´ìœ  |
| Hallucination | Read/Grep toolë¡œ ì‹¤ì œ íŒŒì¼ ì½í˜€ì•¼ ì •í™• |
| Chain of Thought | ë³µì¡í•œ ì‘ì—…ì€ ë‹¨ê³„ ëª…ì‹œ or `/plan` ë¨¼ì € |
| Role Prompting | Agentì˜ system promptê°€ í•˜ëŠ” ì¼ |

---

## Claude Code êµ¬ì„±ìš”ì†Œ ì „ì²´ ì§€ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Claude Code                                 â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  CLAUDE.md  â”‚  â”‚    Skill     â”‚  â”‚    Agent    â”‚  â”‚   Hook   â”‚ â”‚
â”‚  â”‚             â”‚  â”‚              â”‚  â”‚  (Subagent) â”‚  â”‚          â”‚ â”‚
â”‚  â”‚ ì„¸ì…˜ ì‹œì‘ ì‹œ â”‚  â”‚ description  â”‚  â”‚ Task toolë¡œ â”‚  â”‚ Tool í˜¸ì¶œâ”‚ â”‚
â”‚  â”‚ ìë™ ë¡œë“œ   â”‚  â”‚ ë§¤ì¹­ ì‹œ ìë™  â”‚  â”‚ ëª…ì‹œì  í˜¸ì¶œ â”‚  â”‚ ì‹œì ì—   â”‚ â”‚
â”‚  â”‚             â”‚  â”‚ ë¡œë“œ (ë³¸ë¬¸)  â”‚  â”‚             â”‚  â”‚ ë°œë™     â”‚ â”‚
â”‚  â”‚ "í”„ë¡œì íŠ¸   â”‚  â”‚ "Neo ì¿µí‘¸    â”‚  â”‚ ë…ë¦½ contextâ”‚  â”‚          â”‚ â”‚
â”‚  â”‚  ê¸°ì–µ"      â”‚  â”‚  ë‹¤ìš´ë¡œë“œ"   â”‚  â”‚ window      â”‚  â”‚ "ì ˆëŒ€    â”‚ â”‚
â”‚  â”‚             â”‚  â”‚              â”‚  â”‚ "ì „ë¬¸ íŒ€ì›" â”‚  â”‚  ê·œì¹™"   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚  ë¹„ìœ :  í”„ë¡œì íŠ¸ í—Œë²•   í•„ìš”í•  ë•Œ í¼ì¹˜ëŠ”   ì „ë¬¸ ì™¸ì£¼íŒ€   ìë™í™” ê²½ë¹„ì› â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## CLAUDE.md â€” í”„ë¡œì íŠ¸ ê¸°ì–µ

ì„¸ì…˜ì´ ì‹œì‘ë  ë•Œ Claude Codeê°€ **ìë™ìœ¼ë¡œ ì½ëŠ”** íŒŒì¼ì…ë‹ˆë‹¤.
ì—¬ê¸°ì— ì“´ ë‚´ìš©ì€ ë§¤ ì„¸ì…˜ë§ˆë‹¤ system promptì— ì£¼ì…ë©ë‹ˆë‹¤.

```
ì„¸ì…˜ ì‹œì‘
    â”‚
    â–¼
Claude Codeê°€ ìë™ìœ¼ë¡œ:
  1. ~/.claude/CLAUDE.md  (ì „ì—­ ì„¤ì •) ì½ê¸°
  2. ./CLAUDE.md          (í”„ë¡œì íŠ¸)  ì½ê¸°  â† ì´ê²Œ ìš°ë¦¬ íŒŒì¼
  3. Skill frontmatter ëª©ë¡ system promptì— ì¶”ê°€
    â”‚
    â–¼
Claudeê°€ í”„ë¡œì íŠ¸ contextë¥¼ ì´ë¯¸ ì•Œê³  ìˆëŠ” ìƒíƒœë¡œ ì‹œì‘
```

**í™œìš© íŒ:**
- ì•„í‚¤í…ì²˜ ëª©í‘œ, ì½”ë”© ì»¨ë²¤ì…˜, ê¸ˆì§€ ì‚¬í•­ ë“± ê¸°ë¡
- ë„ˆë¬´ ê¸¸ë©´ ì—­íš¨ê³¼ (token ë‚­ë¹„) â†’ í•µì‹¬ë§Œ ê°„ê²°í•˜ê²Œ
- ìƒì„¸ ì§€ì¹¨ì€ Skillë¡œ ë¶„ì‚°, CLAUDE.mdëŠ” ê°€ë³ê²Œ ìœ ì§€

---

## Skill â€” Neoì˜ ì¿µí‘¸ ë‹¤ìš´ë¡œë“œ

```
"I know Kung Fu"
â€” Neo, ì¿µí‘¸ ë°ì´í„°ë¥¼ ë‹¤ìš´ë¡œë“œë°›ì€ ì§í›„
```

Skillì€ í‰ì†Œì—” **description(ì„¤ëª…)ë§Œ** system promptì— ì˜¬ë¼ê°€ ìˆë‹¤ê°€,
ê´€ë ¨ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ê·¸ë•Œì„œì•¼ SKILL.md ë³¸ë¬¸ì„ ì½ì–´ contextì— ì£¼ì…í•©ë‹ˆë‹¤.

### 3ë‹¨ê³„ Progressive Disclosure

ì´ ë¡œë”© ì „ëµì€ Claude Code ìì²´ì˜ ë™ì‘ì…ë‹ˆë‹¤. ê°œë°œìê°€ êµ¬í˜„í•  í•„ìš” ì—†ìŠµë‹ˆë‹¤.

```
1ë‹¨ê³„: Frontmatterë§Œ ë…¸ì¶œ  â† Claude Codeê°€ ì„¸ì…˜ ì‹œì‘ ì‹œ ìë™ìœ¼ë¡œ ì²˜ë¦¬
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  system promptì— ì¶”ê°€ë˜ëŠ” ê²ƒ:

    Available Skills:
    - god-module-check: "Calculate God Module score..."   â† descriptionë§Œ!
    - circular-deps:   "Detect circular dependencies..."  â† ë³¸ë¬¸ ì—†ìŒ
    - kernel-review:   "Check Linux kernel standards..."

  ìˆ˜ì‹­ ë°”ì´íŠ¸ë§Œ ì°¨ì§€. ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œ ì „ì²´ê°€ contextì— ì—†ìŒ.


2ë‹¨ê³„: SKILL.md ë³¸ë¬¸ ë¡œë“œ  â† ë§¤ì¹­ ì‹œ Claudeê°€ bashë¡œ ì½ìŒ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ì‚¬ìš©ì: "wifi_core.c God Module ì ìˆ˜ ê³„ì‚°í•´ì¤˜"
    â”‚
    â–¼
  Claude ë‚´ë¶€ íŒë‹¨:
    "god-module-check" description ë§¤ì¹­!
    â”‚
    â–¼
  $ cat .claude/skills/god-module-check/SKILL.md
    â†’ ì§€ì¹¨(instructions)ì´ contextì— injectë¨


3ë‹¨ê³„: ìŠ¤í¬ë¦½íŠ¸Â·ë ˆí¼ëŸ°ìŠ¤ëŠ” í•„ìš”í•  ë•Œë§Œ  â† SKILL.md ì§€ì¹¨ì— ë”°ë¼
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  $ python3 .claude/skills/god-module-check/scripts/god_module_score.py wifi_core.c

    ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œ 300ì¤„  â†’  contextì— ë“¤ì–´ê°€ì§€ ì•ŠìŒ
    ì‹¤í–‰ ê²°ê³¼(stdout) 50ì¤„ â†’  contextì— injectë¨
    â†’ context window ëŒ€í­ ì ˆì•½
```

### Skill ë””ë ‰í† ë¦¬ êµ¬ì¡°

SKILL.md ì™¸ì— **ìŠ¤í¬ë¦½íŠ¸, ë ˆí¼ëŸ°ìŠ¤ ë¬¸ì„œ, ì—ì…‹ ë“±ì„ í•¨ê»˜** ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
SKILL.md ì§€ì¹¨ì—ì„œ í•„ìš”í•  ë•Œ í•´ë‹¹ íŒŒì¼ì„ bashë¡œ ì‹¤í–‰í•˜ê±°ë‚˜ ì½ìœ¼ë©´ ë©ë‹ˆë‹¤.

```
.claude/skills/
â””â”€â”€ god-module-check/
    â”œâ”€â”€ SKILL.md                      â† í•„ìˆ˜: frontmatter + ì§€ì¹¨
    â”œâ”€â”€ scripts/
    â”‚   â””â”€â”€ god_module_score.py       â† Python ìŠ¤í¬ë¦½íŠ¸ (ì½”ë“œëŠ” context ë°–)
    â””â”€â”€ references/
        â””â”€â”€ scoring_guide.md          â† ì°¸ì¡° ë¬¸ì„œ (í•„ìš”í•  ë•Œë§Œ ì½ìŒ)
```

**SKILL.md êµ¬ì¡°:**

```markdown
---
name: god-module-check               â† /god-module-check slash commandë„ ë¨
description: >
  Calculate God Module score...      â† ìë™ ë§¤ì¹­ì˜ ê¸°ì¤€! ì˜ ì¨ì•¼ í•¨
invocation: auto                     â† auto: ìë™ ë¡œë“œ / manual: slashë§Œ
allowed-tools: Bash, Read            â† ì´ Skillì—ì„œ í—ˆìš©í•  tool
---

# (ì´ ì•„ë˜ ë‚´ìš©ì´ ë§¤ì¹­ ì‹œ contextì— injectë¨)
...
```

`description`ì„ ì˜ ì“°ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤.
Claude Codeê°€ ì´ í…ìŠ¤íŠ¸ë¥¼ ë³´ê³  ìë™ ë§¤ì¹­ ì—¬ë¶€ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤.

### Hookì€ Skill ë‹¨ìœ„ê°€ ì•„ë‹ˆë¼ Tool ë‹¨ìœ„ë¡œ ë°œë™

Skillì´ ë‚´ë¶€ì ìœ¼ë¡œ `Bash` toolì„ í˜¸ì¶œí•  ë•Œ Hookì´ ë°œë™í•©ë‹ˆë‹¤.
Skill ìì²´ê°€ Hook íŠ¸ë¦¬ê±°ê°€ ì•„ë‹™ë‹ˆë‹¤.

```
Skill ì‹¤í–‰ ì¤‘ ë‚´ë¶€ì ìœ¼ë¡œ Bash tool í˜¸ì¶œ
        â”‚
        â–¼
   â† PreToolUse Hook ë°œë™ â†’
   log_bash_cmd.py ì‹¤í–‰
        â”‚
        â–¼
   Bash ëª…ë ¹ ì‹¤í–‰
        â”‚
        â–¼
   â† PostToolUse Hook ë°œë™ â†’
```

### ì´ ë ˆí¬ì˜ Skills

| Skill | ìë™ ë¡œë“œ íŠ¸ë¦¬ê±° | ìŠ¤í¬ë¦½íŠ¸ | ë ˆí¼ëŸ°ìŠ¤ |
|-------|----------------|----------|----------|
| `god-module-check` | "God Module", "ê°“ ëª¨ë“ˆ", "ì•„í‚¤í…ì²˜ ì ìˆ˜" | `god_module_score.py` | `scoring_guide.md` |
| `circular-deps` | "ìˆœí™˜ ì˜ì¡´ì„±", "SCC", "Tarjan" | `detect_cycles.py` | â€” |
| `kernel-review` | "ì»¤ë„ ìŠ¤íƒ€ì¼", "sk_buff", "GFP", "RCU" | `kernel_check.py` | `coding_patterns.md` |

---

## Agent (Subagent) â€” ì „ë¬¸ íŒ€ì› í˜¸ì¶œ

AgentëŠ” **ë…ë¦½ëœ context windowì™€ ë³„ë„ì˜ system prompt**ë¥¼ ê°€ì§„
sub-Claude ì¸ìŠ¤í„´ìŠ¤ì…ë‹ˆë‹¤.

```
.claude/agents/code-reviewer.md
â””â”€â”€ ì´ íŒŒì¼ ë‚´ìš© ì „ì²´ = code-reviewer agentì˜ system prompt
```

### ë©”ì¸ Claude vs Subagent êµ¬ì¡°

```
ë©”ì¸ Claude
  system prompt: CLAUDE.md + Skill ëª©ë¡ + ê¸°ë³¸ ì§€ì¹¨
  context: ì „ì²´ ëŒ€í™” íˆìŠ¤í† ë¦¬
  â”‚
  â”‚  Task tool í˜¸ì¶œ
  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Planner Agent
                         system prompt = planner.md
                         ë…ë¦½ context window
                         â”‚
                         â”‚  Task tool (ë³‘ë ¬)
                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                            â”‚
                    Code Reviewer Agent         Dep Analyzer Agent
                    system prompt               system prompt
                    = code-reviewer.md          = dep-analyzer.md
                    ë…ë¦½ context window         ë…ë¦½ context window
                         â”‚                            â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€ ê²°ê³¼ í•©ì‚° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                    ë©”ì¸ Claudeë¡œ ê²°ê³¼ ë°˜í™˜
```

**ì™œ Agentë¥¼ ë¶„ë¦¬í•˜ë‚˜?**

Attention íŠ¹ì„±ê³¼ ì§ê²°ë©ë‹ˆë‹¤.

```
âŒ í•œ Claudeì—ê²Œ ëª¨ë“  ê²ƒì„ ì‹œí‚¤ë©´:
  "ì½”ë“œ í’ˆì§ˆ + ìˆœí™˜ ì˜ì¡´ì„± + ì»¤ë„ ìŠ¤íƒ€ì¼ + ê°œì„  ê³„íš"
  â†’ Attentionì´ ë¶„ì‚° â†’ ê° ì‘ì—… í’ˆì§ˆ ì €í•˜

âœ… Agentë¡œ ë¶„ë¦¬í•˜ë©´:
  ê° Agentê°€ ë…ë¦½ contextì—ì„œ í•œ ê°€ì§€ì—ë§Œ ì§‘ì¤‘
  â†’ ì •í™•ë„ í–¥ìƒ + ë³‘ë ¬ ì‹¤í–‰ìœ¼ë¡œ ì†ë„ í–¥ìƒ
```

### Agent íŒŒì¼ êµ¬ì¡°

```markdown
# code-reviewer.md
# ì´ íŒŒì¼ ë‚´ìš© ì „ì²´ê°€ sub-agentì˜ system promptì…ë‹ˆë‹¤

You are a WiFi Driver Code Review Specialist with expertise in:
- Linux cfg80211/mac80211 subsystems
- sk_buff lifecycle management
- RCU synchronization patterns

## Review Criteria
...

## Output Format
...
```

### Agent vs Skill í•µì‹¬ ì°¨ì´

| ë¹„êµ | Agent (Subagent) | Skill |
|------|-----------------|-------|
| íŒŒì¼ ìœ„ì¹˜ | `.claude/agents/*.md` | `.claude/skills/*/SKILL.md` |
| í˜¸ì¶œ ë°©ì‹ | Task toolë¡œ **ëª…ì‹œì ** í˜¸ì¶œ | description ë§¤ì¹­ ì‹œ **ìë™** or `/slash` |
| Context | **ë…ë¦½** context window | í˜„ì¬ ëŒ€í™”ì— inject |
| System Prompt | íŒŒì¼ ì „ì²´ê°€ system prompt | í˜„ì¬ ëŒ€í™” contextì— ì¶”ê°€ |
| ì—­í•  | ì „ë¬¸ ì—­í•  ë¶„ë¦¬, ë³‘ë ¬ ì‹¤í–‰ | ì „ë¬¸ ì§€ì‹ on-demand ë¡œë“œ |
| ë¹„ìœ  | **ì „ë¬¸ íŒ€ì› í˜¸ì¶œ** | **ë§¤ë‰´ì–¼ í¼ì¹˜ê¸°** |

---

## Hook â€” ì ˆëŒ€ ê·œì¹™

LLMì€ í™•ë¥ ì ì…ë‹ˆë‹¤. í•­ìƒ ê°™ì€ ê²°ê³¼ë¥¼ ë³´ì¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
Hookì€ ê·¸ ë¶ˆí™•ì‹¤ì„±ì„ **ê²°ì •ë¡ ì  ì½”ë“œë¡œ ë³´ì™„**í•©ë‹ˆë‹¤.

```
LLM (í™•ë¥ ì )                      Hook (ê²°ì •ë¡ ì )
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"rm -rfë¥¼ ì“°ë©´ ì•ˆ ëœë‹¤ê³            ì‹¤ì œë¡œ rm -rf ëª…ë ¹ì„
 ì•Œê³  ìˆì§€ë§Œ ê°€ë” ì”€"               ë¬¼ë¦¬ì ìœ¼ë¡œ ì°¨ë‹¨

ì½”ë”© ìŠ¤íƒ€ì¼ì´ ë§¤ë²ˆ ì¡°ê¸ˆì”© ë‹¤ë¦„      Prettier í•­ìƒ ê°•ì œ ì‹¤í–‰

"í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ì‹¤í–‰í•´ì•¼ í•œë‹¤ê³        íŒŒì¼ ìˆ˜ì • í›„ ìë™ìœ¼ë¡œ
 ì•Œì§€ë§Œ ìŠì„ ìˆ˜ ìˆìŒ"               í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```

### Hook ë°œë™ ë‹¨ìœ„: Tool

Hookì€ **tool í˜¸ì¶œ ë‹¨ìœ„**ë¡œ ë°œë™í•©ë‹ˆë‹¤. Skill ë‹¨ìœ„ë‚˜ Agent ë‹¨ìœ„ê°€ ì•„ë‹™ë‹ˆë‹¤.

```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",    â† tool ì´ë¦„ì´ ë§¤ì¹­ ê¸°ì¤€
        "hooks": [...]
      }
    ]
  }
}
```

ë§¤ì¹­ ëŒ€ìƒ tool ëª©ë¡: `Bash`, `Read`, `Write`, `Edit`, `MultiEdit`, `Glob`, `Grep`, `WebFetch`, `Task`, ...

### Hookì˜ ì¢…ë¥˜ (10ê°€ì§€)

```
ì„¸ì…˜ ë¼ì´í”„ì‚¬ì´í´
    â”‚
    â”œâ”€ [SessionStart]          ì„¸ì…˜ ì´ˆê¸°í™”, context ë¡œë“œ
    â”‚
    â”œâ”€ [UserPromptSubmit]      ì‚¬ìš©ì ì…ë ¥ ì§í›„, Claude ì²˜ë¦¬ ì „
    â”‚                          â†’ git status, ë‚ ì§œ ë“± ìë™ inject
    â”‚
    â”œâ”€ [PreToolUse]            Tool ì‹¤í–‰ ì§ì „ (ì°¨ë‹¨ ê°€ëŠ¥)
    â”‚   â”‚                      â†’ ìœ„í—˜ ëª…ë ¹ ì°¨ë‹¨, input ìˆ˜ì •
    â”‚   â””â”€ [PermissionRequest]  ê¶Œí•œ ëŒ€í™”ìƒì ëŒ€ì‹  ìë™ í—ˆìš©/ê±°ë¶€
    â”‚
    â”œâ”€ [PostToolUse]           Tool ì„±ê³µ ì™„ë£Œ í›„
    â”‚                          â†’ Prettier ì‹¤í–‰, í…ŒìŠ¤íŠ¸ ìë™ ì‹¤í–‰
    â”œâ”€ [PostToolUseFailure]    Tool ì‹¤íŒ¨ ì‹œ
    â”‚                          â†’ ì—ëŸ¬ ë¡œê·¸, Slack ì•Œë¦¼
    â”‚
    â”œâ”€ [SubagentStop]          Sub-agent ì‘ë‹µ ì™„ë£Œ ì‹œ
    â”œâ”€ [Stop]                  ë©”ì¸ Claude ì‘ë‹µ ì™„ë£Œ ì‹œ
    â”‚                          â†’ ì„¸ì…˜ ìš”ì•½, git commit, ì•Œë¦¼
    â”‚
    â”œâ”€ [Notification]          (ë¹„ë™ê¸°) ì•Œë¦¼ ë°œìƒ ì‹œ
    â”‚                          â†’ ë°ìŠ¤í¬íƒ‘ í‘¸ì‹œ, TTS
    â”œâ”€ [PreCompact]            Context ì••ì¶• ì§ì „
    â””â”€ [SessionEnd]            ì„¸ì…˜ ì™„ì „ ì¢…ë£Œ ì‹œ
```

### Hook íƒ€ì…: command vs prompt

```json
// command ë°©ì‹ â€” ê²°ì •ë¡ ì  (í•­ìƒ ê°™ì€ ì½”ë“œ ì‹¤í–‰)
{ "type": "command", "command": "python3 .claude/hooks/log_bash_cmd.py" }

// prompt ë°©ì‹ â€” LLMì´ íŒë‹¨ (ìœ ì—°í•˜ì§€ë§Œ ë¹„ê²°ì •ì )
{ "type": "prompt",  "prompt": "ì´ ëª…ë ¹ì´ ì•ˆì „í•œì§€ íŒë‹¨í•˜ê³  allow/denyë¡œ ì‘ë‹µ: $ARGUMENTS" }
```

### Hookì—ì„œ Claude ì œì–´ (exit code)

```python
sys.exit(0)  # ì •ìƒ ì§„í–‰
sys.exit(2)  # stderr ë‚´ìš©ì„ Claudeì—ê²Œ feedbackìœ¼ë¡œ ì „ë‹¬ í›„ ì§„í–‰
             # Claudeê°€ ì´ ë‚´ìš©ì„ ì½ê³  ë‹¤ìŒ í–‰ë™ ê²°ì •
```

PreToolUseì—ì„œ ì°¨ë‹¨í•˜ë ¤ë©´:
```python
# hookSpecificOutputìœ¼ë¡œ deny ë°˜í™˜
import json, sys
print(json.dumps({
    "hookSpecificOutput": {
        "hookEventName": "PreToolUse",
        "permissionDecision": "deny",
        "permissionDecisionReason": "rm -rf is not allowed"
    }
}))
sys.exit(0)
```

### ì´ ë ˆí¬ì˜ Hooks

```
log_bash_cmd.py        PreToolUse(Bash)  â†’ ëª…ë ¹ ê°ì‚¬ ë¡œê·¸ + ìœ„í—˜ ëª…ë ¹ ì°¨ë‹¨
agent_complete_notify  PostToolUse(Task) â†’ Sub-agent ì™„ë£Œ ì•Œë¦¼
session_summary.py     Stop              â†’ ì„¸ì…˜ ìš”ì•½ ì €ì¥, ë¡œê·¸ ì´ˆê¸°í™”
```

---

## ë°ëª¨ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
wifi-driver-demo/
â”‚
â”œâ”€â”€ CLAUDE.md                           â† ì„¸ì…˜ ì‹œì‘ ì‹œ ìë™ ë¡œë“œ
â”‚
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ settings.json                   â† ê¶Œí•œ ë° Hook ì„¤ì •
â”‚   â”‚
â”‚   â”œâ”€â”€ agents/                         â† Subagents (íŒŒì¼ ì „ì²´ = system prompt)
â”‚   â”‚   â”œâ”€â”€ planner.md                  ğŸ¯ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
â”‚   â”‚   â”œâ”€â”€ code-reviewer.md            ğŸ” ì½”ë“œ í’ˆì§ˆ ì „ë¬¸ê°€
â”‚   â”‚   â””â”€â”€ dependency-analyzer.md      ğŸ•¸ï¸  ì˜ì¡´ì„± ê·¸ë˜í”„ ì „ë¬¸ê°€
â”‚   â”‚
â”‚   â”œâ”€â”€ skills/                         â† Skills (on-demand ë¡œë“œ)
â”‚   â”‚   â”œâ”€â”€ god-module-check/
â”‚   â”‚   â”‚   â”œâ”€â”€ SKILL.md                ğŸ“‹ ì§€ì¹¨
â”‚   â”‚   â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ god_module_score.py ğŸ“Š ì ìˆ˜ ê³„ì‚° ìŠ¤í¬ë¦½íŠ¸
â”‚   â”‚   â”‚   â””â”€â”€ references/
â”‚   â”‚   â”‚       â””â”€â”€ scoring_guide.md    ğŸ“– íŒ€ ê¸°ì¤€í‘œ
â”‚   â”‚   â”œâ”€â”€ circular-deps/
â”‚   â”‚   â”‚   â”œâ”€â”€ SKILL.md
â”‚   â”‚   â”‚   â””â”€â”€ scripts/
â”‚   â”‚   â”‚       â””â”€â”€ detect_cycles.py    ğŸ”´ Tarjan SCC êµ¬í˜„
â”‚   â”‚   â””â”€â”€ kernel-review/
â”‚   â”‚       â”œâ”€â”€ SKILL.md
â”‚   â”‚       â”œâ”€â”€ scripts/
â”‚   â”‚       â”‚   â””â”€â”€ kernel_check.py     âš™ï¸  ì •ì  ë¶„ì„ê¸°
â”‚   â”‚       â””â”€â”€ references/
â”‚   â”‚           â””â”€â”€ coding_patterns.md  ğŸ“– ì»¤ë„ ì½”ë”© íŒ¨í„´
â”‚   â”‚
â”‚   â””â”€â”€ hooks/                          â† ê²°ì •ë¡ ì  ì½”ë“œ
â”‚       â”œâ”€â”€ log_bash_cmd.py             PreToolUse: ëª…ë ¹ ë¡œê¹… + ì°¨ë‹¨
â”‚       â”œâ”€â”€ agent_complete_notify.py    PostToolUse: Agent ì™„ë£Œ ì•Œë¦¼
â”‚       â””â”€â”€ session_summary.py         Stop: ì„¸ì…˜ ìš”ì•½ ì €ì¥
â”‚
â””â”€â”€ src/                                â† ë°ëª¨ìš© WiFi ë“œë¼ì´ë²„ ì†ŒìŠ¤
    â”œâ”€â”€ core/wifi_core.c                ğŸš¨ God Module (ì˜ë„ì )
    â”œâ”€â”€ mac/mac_core.c                  ğŸ”´ ìˆœí™˜ ì˜ì¡´ì„± ì°¸ì—¬
    â”œâ”€â”€ cfg80211/cfg_ops.c              ğŸ”´ ìˆœí™˜ ì˜ì¡´ì„± ì°¸ì—¬
    â””â”€â”€ security/wpa_handler.c         âœ… ì •ìƒ ëª¨ë“ˆ (ë¹„êµìš©)
```

---

## ì˜ë„ì ìœ¼ë¡œ ì‹¬ì–´ë‘” ë¬¸ì œë“¤

ìƒ˜í”Œ ì½”ë“œì—ëŠ” ë°ëª¨ë¥¼ ìœ„í•´ ë‹¤ìŒ ë¬¸ì œë“¤ì„ **ì˜ë„ì ìœ¼ë¡œ** ì‹¬ì—ˆìŠµë‹ˆë‹¤.
Agentì™€ Skillì´ ì´ê²ƒë“¤ì„ ë°œê²¬í•˜ëŠ” ê±¸ ë³´ì—¬ì£¼ëŠ” ê²Œ ëª©í‘œì…ë‹ˆë‹¤.

### wifi_core.c â€” God Module

**10ê°€ì§€ ì±…ì„ì´ í•œ íŒŒì¼ì— í˜¼ì¬:**

```
1. Device lifecycle   (init/deinit)
2. TX path            (workqueue ê¸°ë°˜ ë¹„ë™ê¸° ì „ì†¡)
3. RX path            (ë³µí˜¸í™” í›„ ë„¤íŠ¸ì›Œí¬ ìŠ¤íƒ ì „ë‹¬)
4. Scanning           (BSS íƒìƒ‰ ë° ê²°ê³¼ ê´€ë¦¬)
5. Connection mgmt    (ì¸ì¦ â†’ ì—°ê²° â†’ í•´ì œ)
6. Power management   (suspend/resume)
7. Statistics         (TX/RX íŒ¨í‚·Â·ë°”ì´íŠ¸ ì¹´ìš´í„°)
8. Config management  (TX power, RTS threshold)
9. Firmware mgmt      (ë¡œë“œ, ë¦¬ì…‹)
10. Roaming           (RSSI ê¸°ë°˜ ë¡œë° íŠ¸ë¦¬ê±°)
```

**ì‹¤ì œ ì¸¡ì • ê²°ê³¼ (god_module_score.py ì‹¤í–‰):**

```
Lines of Code:    362ì¤„ â†’ 3.0/5.0  (weight 30%)
Responsibilities: 15ê°œ  â†’ 1.0/5.0  (weight 40%)
Coupling:         14íšŒ  â†’ 2.0/5.0  (weight 30%)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Final: (3.0Ã—0.3) + (1.0Ã—0.4) + (2.0Ã—0.3) = 1.90/5.0 [POOR ğŸ”´]

íŒ€ ëª©í‘œ: 4.0+
Gap:    -2.10 points
```

### ìˆœí™˜ ì˜ì¡´ì„±

```
Cycle 1: wifi_core â†â†’ mac_core           (2-node, ì§ì ‘ ìˆœí™˜)
Cycle 2: mac_core  â†’  cfg80211 â†’ mac_core (2-node, ê°„ì ‘ ìˆœí™˜)
Cycle 3: cfg_ops.c â†’ wifi_core_scan_start() (ì½œë°± ì—­ë°©í–¥ ì˜ì¡´)
```

### wpa_handler.c â€” ê¹¨ë—í•œ ëª¨ë“ˆ (ë¹„êµìš©)

```
wpa_handler â†’ wifi_types.h (ë°ì´í„° íƒ€ì…ë§Œ)
            â†’ ê·¸ ì™¸ ì˜ì¡´ì„± ì—†ìŒ

ì‚¬ì´í´ ì—†ìŒ. ì±…ì„ 1ê°œ. ê²°í•©ë„ ìµœì €.
God Module Score: 5.0/5.0 [EXCELLENT âœ…]  â† ë¶„ë¦¬ í›„ ëª©í‘œê°€ ì´ê²ƒ
```

---

## ì°¸ê³  ìë£Œ

- [Claude Code ê³µì‹ ë¬¸ì„œ](https://docs.anthropic.com/en/docs/claude-code/overview)
- [Agent Skills ê³µì‹ ë¬¸ì„œ](https://code.claude.com/docs/en/skills)
- [Hooks ë ˆí¼ëŸ°ìŠ¤](https://code.claude.com/docs/en/hooks)
- [Attention Is All You Need (ì› ë…¼ë¬¸)](https://arxiv.org/abs/1706.03762)

---

<div align="center">

**"I know Kung Fu."**

*ì´ì œ ì—¬ëŸ¬ë¶„ë„ ì••ë‹ˆë‹¤.*

</div>
